4. DESENVOLVIMENTO DE UM PARSER SINTÁTICO II 
4.0. “Colocando a mão na massa” Para desenvolver um parser em Prolog, já sabemos que é preciso primeiramente ter essa linguagem de programação instalada no computador. Como acabamos de ver, para o desenvolvimento de nossa pequena amostra de parser, vamos utilizar a versão SWI Prolog 4.0.7, desenvolvida na University of Amsterdam1.  Neste livro, pretendemos mostrar ao leitor uma maneira de como começar seu caminho no mundo da Linguística Computacional. Escolhemos como tarefa prática o desenvolvimento de um parser sintático em linguagem Prolog. Evidentemente, o programa que apresentaremos aqui não passará de uma amostra simples de um parser. No entanto, acreditamos que o leitor conseguirá partir dela se desejar continuar seus estudos, seja sobre parsing automático ou outra aplicação envolvendo o Prolog. 4.1. Sobre as regras gramaticais Para começarmos o desenvolvimento de nossa gramática em Prolog, devemos implementar regras sintagmáticas relativas à descrição sintática do português. Para simplificarmos, iremos trabalhar apenas com as regras da sentença simples (que contém apenas um verbo).  1 O leitor pode “baixá-la”, como dissemos, do site www.inf.pucrs.br/~flavio/, por exemplo. 

 63 E para implementarmos as regras da gramática de nosso parser, podemos começar com regras relativamente simples já consagradas na literatura pertinente2PT, como a regra (1):  (1)  S à SN  SV  A esta altura da leitura, já sabemos que ela quer dizer que uma sentença (S) é formada por um sintagma nominal (SN) e um sintagma verbal (SV). A partir dessa regra, devemos elaborar outras para o SN e para o SV, ou conferir o que consta na literatura pertinente:  (2)  SN à Det  N (3)  SV à V  SN  Se quisermos fazer com que nosso parser funcione, já sabemos que não podemos parar por aí, pois ainda temos de implementar os itens lexicais. Para começar, podemos pegar alguns itens lexicais comumente utilizados em exemplos por sintaticistas, como alguns apresentados em Pagani (2004), por exemplo:  (4) Det à o, a (5) N à João, Maria (6) V à ama  Implementaremos na gramática de nosso parser algumas regras já consagradas na literatura, como no caso das regras (1), (2) e (3) acima, que podem ser encontradas, por exemplo, em Heckler & Back (1988: 151).  2 Como Heckler & Back (1988), Lemle (1984), Luft (1986), Perini (1989 e 2000) e Souza e Silva & Koch (1993), que tratam da descrição sintática do português. 

 64 A partir delas, poderemos usar exemplos apresentados na literatura, que servem para ilustrar ou para testar a regra (e aí, já vamos aumentando o tamanho de nosso léxico). Por último, trabalharemos com as dificuldades que encontrarmos para implementar uma regra em Prolog da melhor maneira possível. Antes de continuarmos com o exemplo da formação da sentença, vejamos um procedimento de formalização e implementação de regras sintáticas no Prolog a partir de uma regra de formação do SN descrita por Souza e Silva & Koch (1993: 18). De acordo com as autoras, o SN em português tem a seguinte estrutura:  (7) SN à     (Det)  (Mod)  N  (Mod)  Pro  Δ Alguns símbolos já são nossos conhecidos: SN = Sintagma Nominal Det = Determinante N = Nome (ou Substantivo)  Alguns símbolos podem ser novos: Mod = Modificador Pro = Pronome Δ = Vazio (ou SN não preenchido lexicalmente)  O uso das chaves indica a fusão de diversas regras. No caso de (7), ele mostra que há três descrições possíveis do SN. Em Prolog, não temos esse recurso e, se quisermos implementar essa regra na gramática do programa, teremos de descrever três diferentes regras para o SN: 

 65  (7.1) SN à (Det)  (Mod)  N  (Mod) (7.2) SN à Pro (7.3) SN à Δ  Na verdade, os parênteses são também uma notação nova. Eles assinalam que o item pode ou não aparecer, ou seja, o elemento entre parênteses não é obrigatório. Em Prolog, também não contamos com esse recurso, por isso deveremos ter fôlego para transformar a regra (7.1) nas seguintes: (7.4) SN à  N (7.5) SN à  Det  N (7.6) SN à  Det  Mod  N  (7.7) SN à  Det  N  Mod (7.8) SN à  Det  Mod  N  Mod (7.9) SN à  Mod  N  Mod (7.10) SN à  Mod  N (7.11) SN à  N  Mod  Essa adaptação das regras à plataforma do Prolog mostra um pouco daquilo que dissemos anteriormente sobre trabalhar com as dificuldades de implementação das regras sintagmáticas já consagradas na literatura linguística3. Mas há mais trabalho envolvido aí. Vamos começar com apenas uma regra das acima estudas, digamos com a (7.5). Ela remete-nos a outra regra, já que, de acordo com Souza e Silva & Koch (1993: 17), o Det, em português, pode ser composto, apresentando a seguinte estrutura:  3 Na verdade, o leitor deve se lembrar que, para adaptar essas regras sintagmáticas em Prolog, deveríamos escrevê-las sempre em letras minúsculas e utilizando vírgulas entre os constituintes. Ou seja, ao invés de SN à Det  N, por exemplo, teríamos de escrever sn --> det, n. em um programa em Prolog. 

 66  (8) Det à (pré-det)  det-base  (pós-det) Já sabemos que, no Prolog, essa regra deverá ser implementada da seguinte maneira:  (8.1) Det à det-base (8.2) Det à pré-det  det-base (8.3) Det à pré-det  det-base  pós-det (8.4) Det à det-base  pós-det  Agora sim, com as regras estudadas e devidamente implementadas em nossa gramática em Prolog, podemos finalmente testar nosso pequeno parser. Já temos regras bastante detalhadas para o SN e podemos juntá-las com as regras (1) e (3) para formarmos uma sentença. Estamos apenas nos esquecendo de detalhe: o léxico.  Nossa primeira medida na implementação do léxico foi inicia-lo a partir dos exemplos apresentados na literatura. “A partir” significa que podemos utilizar os exemplos tal como são apresentados na literatura e também fazer uso de frases ou sintagmas que criamos baseando-nos nos exemplos originais. Para continuar com nossa ilustração, utilizaremos alguns exemplos de Souza e Silva & Koch (1993: 17-18) para o SN (exemplos (4.1), (4.2), (4.3) e (4.6)), bem como alguns exemplos que nosso engenho e arte nos permitiram produzir a partir deles (exemplos (4.4), (4.5) e (4.7))4.  (4.1)   estes meus cinco amigos (4.2)   todos os meus amigos  4 Lembre-se de que o asterisco marca uma sentença ou um constituinte agramatical. 

 67 (4.3) *os estes meninos (4.4)   os meninos (4.5)   estes meninos (4.6) *dois os livros (4.7)   os dois livros  Implementaremos, então, no léxico do Prolog todos os itens lexicais acima envolvidos (estes, meus, cinco, amigos, todos, os, meninos, dois, livros), da seguinte maneira: iremos separar as palavras de acordo com a sua classe gramatical, a saber, determinante e substantivo, e depois implementá-las em nossa gramática computacional. Uma primeira tentativa seria simplesmente aumentar os dados das regras (4) e (5), vistas acima: (4.1) Det à os, as, estes, meus, cinco, todos, dois (5.1) N à João, Maria, amigos, meninos, livros,  No entanto, vimos que o determinante deve ser descrito mais detalhadamente, pois os itens que estão sob esse rótulo, na verdade, podem ser predeterminantes, determinantes-base ou pós-determinantes. Então, refinemos nossas regras, ainda de acordo com as explicações de Souza e Silva & Koch. (4.1.1) Pré-det à todos (4.1.2) Det-base à os, as, estes (4.1.3) Pós-det à meus, cinco, dois Para termos uma noção do todo, vamos reunir as regras de nossa gramática até agora no quadro 4.1 a seguir5.   5 A única modificação em relação ao que vimos até agora foi que ampliamos a classe dos verbos (amam, pega, pegam, lê, leem). 

 68 Quadro 4.1: Primeira versão de nossa gramática S à SN  SV SN à  N SN à  Det  N SN à  Det  Mod  N  SN à  Det  N  Mod SN à  Det  Mod  N  Mod SN à  Mod  N Mod SN à  Mod  N SN à  N Mod SV à V SN Det à det-base Det à pré-det  det-base Det à pré-det  det-base  pós-det Det à det-base  pós-det  V à ama, amam, pega, pegam, lê, leem N à João, Maria, amigos, meninos, livros,  pré-det à todos det-base à os, as, estes pós-det à meus, cinco, dois   Sem entrar em maiores detalhes de programação em Prolog, podemos dizer, com base na gramática acima, que já conseguimos reconhecer as seguintes frases, entre outras:  (4.8) O João tem dois amigos. (4.9) Todos os meus amigos têm estes livros. (4.10) Os meninos leem livros. (4.11) Estes meninos leem livros.  Além de poder reconhecê-las como frases gramaticais da língua, nosso analisador também já é capaz de atribuir a elas sua devida estrutura de constituintes, aqui representada através de colchetes rotulados. Veja só: 

 69  (4.10a) BSB[BSNB[O João] BSVB[tem BSNB[dois amigos]]] TP6PT (4.11a) BSB[BSNB Todos os meus amigos] BSVB[têm BSNB[estes livros]]] (4.12a) BSB[BSNB Os meninos] BSVB[leem BSNB[livros]]] (4.13a) BSB[BSNB Estes meninos] BSVB[leem BSNB[livros]]]  Além disso, nosso pequeno parser já consegue descartar as frases (4.14) e (4.15), claramente agramaticais:  (4.14) *Os estes meninos leem livros. (4.15) *Dois os meninos amam a Maria.  Legal, né? Então, agora vem uma parte ainda melhor: um exercício! Tente passar a gramática que apresentamos no quadro 4.1 acima para a notação Prolog (letras minúsculas, vírgulas, pontos finais, flechinhas do tipo --> etc.). Depois de ter feito isso, escreva um programa e dê a ele o nome de gram01.swi. Por fim, carregue-o no Prolog e teste algumas frases (veja a nossa gramática, gram.txt, para dar uma “coladinha”!). Se o leitor fez o exercício proposto acima, percebeu que a gramática já está ficando boa. No entanto, a frase (4.16) não será reconhecida por nosso parser. Por quê?   (4.16) Estes meus cinco amigos amam a Maria.  
TP6PT Para facilitar a visualização, estamos mostrando uma representação da estrutura de constituintes relativamente simples, apontando unicamente a classe dos sintagmas. É o que Othero & Gasperin (a sair) chamam de skeleton parsing. No entanto, nosso parser a esta altura já teria condições de proceder com uma representação de full parsing (cf. Othero e Gasperin, novamente), identificando até mesmo os níveis dos itens lexicais: 
BSB[BSN B[Bdet-baseB[O] BNB[João]] BSVB[BVB[tem] [BSN B[Bpós-detB[dois] BNB[amigos]]]]. 

 70  O atento leitor deve ter notado que há algo errado com o primeiro SN da frase (4.16). Ou melhor, na verdade não há nada errado com esse SN, há algo errado na gramática de nosso parser: de acordo com a nossa gramática, não conseguimos reconhecer a regra que permita gerar o SN visto em (4.16). O problema é que há ali a seguinte estrutura: SN à det-base pós-det N (BSNB[Bdet-baseB[Estes] Bpós-detB[meus] Bpós-detB[cinco] BNB[amigos]), que não é reconhecida pelo nosso pequeno analisador gramatical. Uma solução aparente poderia ser incluir em nossa gramática uma regra que permita a realização desse tipo de estrutura na língua, aumentando o número de regras que dizem respeito à boa formação dos SNs. Essa nova regra garantiria a validade da frase (4.16) atribuindo corretamente a estrutura (4.16a) a essa sentença. (4.16a) BSB[[BSNB[Estes meus cinco amigos] BSVB[amam [BSNB[a Maria]]] No entanto, as seguintes frases também seriam consideradas gramaticais, com base nessa mesma regra: (4.17) *Estes meus meus amigos amam a Maria. (4.18) *Estes dois cinco amigos amam a Maria.  Há aí um problema, porém, não trataremos dele aqui. Isso apenas serve para que o leitor já possa ter uma pequena ideia do que quisemos dizer com “implementar regras gramaticais a partir de problemas encontrados em regras consagradas na literatura pertinente”. Além desse ínfimo detalhe da ordem dos determinantes no SN, veremos que ainda temos muitas limitações na nossa primeira gramática esboçada no quadro 4.1.  Um grande problema, por exemplo, diz respeito à concordância verbal e nominal. Não há nada em nossa gramática que descarte as frases 

 71 (4.19), (4.20) e (4.21), todas elas agramaticais na língua portuguesa, devido a erros no sistema de concordância verbal, nominal ou ambas:  (4.19) *Os meninos lê livros. (4.20) *Os João tem dois amigo. (4.21) *Todos o meus amigo tem este livros. Teremos de resolver esses problemas alterando as regras sintagmáticas para que elas possam levar em conta elementos como a concordância verbal e nominal. Apesar de muitas obras na literatura linguística não mencionarem o assunto da concordância na descrição de regras sintagmáticas do português, encontramos propostas interessantes em obras de Linguística Computacional voltadas para o desenvolvimento de parsers sintáticos, como Beardon, Lumsden & Holmes (1991), Covington (1994), Dougherty (1994), Othero (2004) e Pagani (2004). No capítulo seguinte, iremos apresentar uma gramática inicial implemen-tada em Prolog e descrever, passo a passo, o seu funcionamento. 4.2. Sobre o léxico Além desses problemas sintáticos que analisamos na seção anterior, há ainda um problema de outra ordem. Por que este pequeno parser que estamos desenvolvendo aceita a frase (4.22), mas não aceita as sentenças (4.23) e (4.24)?  (4.22) O meu amigo tem cinco livros. (4.23) O meu amigo tem cinco gramáticas. (4.24) O meu amigo tem cinco revistas.  Aparentemente as três frases deveriam ser aceitas pelas regras gramaticais já inscritas em nossa gramática. Afinal, as sentenças (4.23) e 

 72 (4.24) são idênticas à (4.22), no que diz respeito a suas estruturas sintáticas. Veja só: (4.22a) S [SN [det-base pós-det N] SV [V [SN [pós-det N]]] (4.23a) S [SN [det-base pós-det N] SV [V [SN [pós-det N]]] (4.24a) S [SN [det-base pós-det N] SV [V [SN [pós-det N]]] O que faz então com que o parser não as reconheça como sentenças gramaticais da língua? A resposta é muito simples: o léxico. Para nosso reconhecedor gramatical, as palavras “gramáticas” e “revistas” não querem dizer nada. Como essas palavras não estão na sua base de dados, ele simplesmente não as reconhece e faz com que o programa não consiga processar a análise das sentenças desejadas. Dê mais uma olhada no quadro 4.1, que contém a gramática desenvolvida até aqui. (…) Evidentemente, o pequeno parser que desenvolveremos aqui servirá apenas de amostra para que o leitor entenda o funcionamento da implementação de gramáticas sintagmáticas em Prolog. Se desejássemos desenvolver um parser realmente robusto, teríamos de implementar um léxico realmente grande7. Antes de prosseguirmos, vale ainda tratar de mais um ponto. Uma questão bastante importante de que o leitor provavelmente ainda não tenha se dado conta é a seguinte: da mesma forma como as frases (4.23) e (4.24) não foram reconhecidas como frases gramaticais pela nossa gramática por conterem palavras desconhecidas à lista de itens lexicais do programa, também a sentença (4.25) seria tida como agramatical, ao passo que (4.26) seria considerada perfeitamente gramatical:  (4.25) O menino ama a Maria. (4.26) Os meninos amam a Maria.  7 Veja em Othero (2004) como foi implementado um léxico considerável no parser Grammar Play. 

 73  Pasmem, linguistas desprevenidos: para nosso parser há oito diferentes palavras nas frases (4.25) e (4.26): o, os, menino, meninos, ama, amam, a, Maria. Isso quer dizer que teremos de implementar no léxico de nosso programa quatro entradas para cada determinante, substantivo ou adjetivo: duas para flexão de gênero (o, a, menino, menina, bonito, bonita) e duas para flexão de número (o, os, menino, meninos, bonito, bonitos)8. E o que dizer dos verbos? Cada forma verbal infinitiva corresponde a aproximadamente 59 diferentes “palavras” (entre as formas verbais dos modos indicativo, subjuntivo e imperativo)!  Sabemos o que o leitor deve estar imaginando agora — especialmente aquele nosso leitor sem conhecimento computacional: “será que não há alguma maneira de o computador conjugar automaticamente todos os verbos? Será que não há como desenvolver um programa para flexionar os substantivos, os adjetivos e os determinantes?”.  A resposta é “Sim, há como fazer isso”. No entanto, acreditamos que desenvolver um parser morfossintático ou mesmo um conjugador automático de verbos fuja ao escopo de nosso trabalho. Por isso, neste livro de introdução à Linguística Computacional, estudaremos apenas a implementação de regras sintáticas em Prolog TP9PT. No próximo capítulo, faremos uma aplicação do que vimos estudando e implementaremos uma pequena gramática em Prolog.  8 Algumas palavras, no entanto, não sofrem flexão de gênero ou número, como por exemplo, três (pré-det sem flexão de gênero e número), ônibus (N sem flexão de gênero e número), inteligente (Adj sem flexão de gênero) etc. 
TP9PT Sobre parsers morfológicos e morfossintáticos, dê uma olhada em Cole et al. (1997), Dougherty (1994), Garside, Leech & McEnery (1997), Vieira & Lima (2001), e também no site do NILC (www.nilc.icmc.usp.br/nilc/index.html). Além disso, em www.flip.pt, o leitor irá encontrar os programas Wordbreaker e Stemmer, que lidam com a estrutura morfológica de palavras do português, e em www.linguateca.pt, há inúmeros links para ferramentas linguísticas que lidam com a morfologia do português. Ao término da leitura deste livro, dê uma olhada nessas referências. 

